import {
  Canvas,
  Meta,
  Story,
  ArgsTable
} from '@storybook/addon-docs'
import RplForm from './RplForm.vue'
import RplFormElement from './../RplFormElement/RplFormElement.vue'

export const SingleTemplate = (args) => ({
  components: { RplForm },
  setup() {
    return { args }
  },
  template: `
    <RplForm v-bind="args">
      <template #belowForm="{ value }">
        <div class="rpl-storybook-form-values">
          <h2 class="rpl-type-h4">Internal form values</h2>
          <pre wrap>{{ value }}</pre>
        </div>
      </template>
    </RplForm>
  `
})

export const SlotTemplate = (args) => ({
  components: { RplForm,RplFormElement },
  setup() {
    return { args }
  },
  template: `
  <RplForm>
    <RplFormElement
      type="RplFormText"
      label="test"
    />
    <template #belowForm="{ value }">
      <div class="rpl-storybook-form-values">
        <h2 class="rpl-type-h4">Internal form values</h2>
        <pre wrap>{{ value }}</pre>
      </div>
    </template>
  </RplForm>
  `
})

<Meta title='Forms/Form' component={RplForm} />

# Forms

<ArgsTable of={RplForm} />

<Canvas>
  <Story
    name='Default'
    args={{
      id: 'test123form',
      schema: [
        {
          $formkit: 'RplFormText',
          name: 'long_enquiry',
          label: 'What kind of long enquiry do you have?',
          id: 'text',
          suffixIcon: 'icon-search',
          help: 'Do you need help?',
          validationLabel: 'enquiry',
          validation: 'required|length:0,20'
        },
        {
          $formkit: 'RplFormText',
          name: 'Text no icons',
          label: 'RplFormText Should you flush tissues down the toilet?',
          id: 'textnoicons',
          value: 'test content',
          help: 'Do you need help?',
          validation: 'required'
        },
        {
          $formkit: 'RplFormEmail',
          name: 'Text',
          label: 'Email',
          id: 'email',
          help: 'Add your work email',
          validation: 'required'
        },
        {
          $formkit: 'RplFormTel',
          name: 'tel',
          label: 'Mobile number',
          id: 'tel',
          help: 'Please enter a valid mobile number',
          validation:[['required'],['matches', /^(?:\+?(61))? ?(?:\((?=.*\)))?(0?[2-57-8])\)? ?(\d\d(?:[- ](?=\d{3})|(?!\d\d[- ]?\d[- ]))\d\d[- ]?\d[- ]?\d{3})$/]],
          validationMessages: {
            required: 'We require a mobile for verification purposes',
            matches: 'Please enter a valid mobile number'
          }
        },
        {
          $formkit: 'RplFormTextarea',
          name: 'message',
          label: 'Message',
          id: 'message',
          help: 'Please enter a message',
          counter: 'character',
          counterMin: 10,
          counterMax: 50,
          validation: [['required'], ['length', 10, 50]],
          validationMessages: {
            required: 'The message field is required',
            matches: 'Please enter between 10 and 50 characters',
          }
        },
        {
          $formkit: 'RplFormCheckbox',
          id: 'single-checkbox',
          name: 'single-checkbox',
          label: 'How are you?',
          checkboxLabel: 'I am good thanks',
          help: 'A common human greeting',
          value: false,
          validation: 'accepted',
          validationMessages: {
            accepted: 'Please confirm that you are good thanks',
          }
        },
        {
          $formkit: 'RplFormCheckboxGroup',
          id: 'checkbox-group',
          name: 'checkbox-group',
          label: 'What is the answer?',
          help: 'There may be multiple answers',
          validationLabel: 'enquiry',
          validation: 'required|length:2,3',
          validationMessages: {
            required: 'Please provide an answer',
            length: 'You must choose at least two answers',
          },
          options: [
            {
              id: "thing-1",
              label: "Thing 1",
            },
            {
              id: "thing-2",
              label: "Thing 2",
            },
            {
              id: "thing-3",
              label: "Thing 3",
            }
          ]
        },
        {
          $formkit: 'RplFormDropdown',
          multiple: false,
          id: 'dropdown-single',
          name: 'dropdown-single',
          label: 'What is the answer?',
          help: 'There may be multiple answers',
          validationLabel: 'enquiry',
          validation: 'required|length:2,3',
          validationMessages: {
            required: 'Please provide an answer',
            length: 'You must choose at least two answers',
          },
          options: [
            {
              id: "thing-1",
              value: "thing-1",
              label: "Thing 1",
            },
            {
              id: "thing-2",
              value: "thing-2",
              label: "Thing 2",
            },
            {
              id: "thing-3",
              value: "thing-3",
              label: "Thing 3",
            }
          ]
        },
        {
          $formkit: 'RplFormDropdown',
          multiple: true,
          id: 'dropdown-multi',
          name: 'dropdown-multi',
          label: 'What is the answer?',
          help: 'There may be multiple answers',
          validationLabel: 'enquiry',
          validation: 'required|length:2,3',
          validationMessages: {
            required: 'Please provide an answer',
            length: 'You must choose at least two answers',
          },
          options: [
            {
              id: "thing-1",
              value: "thing-1",
              label: "Thing 1",
            },
            {
              id: "thing-2",
              value: "thing-2",
              label: "Thing 2",
            },
            {
              id: "thing-3",
              value: "thing-3",
              label: "Thing 3",
            }
          ]
        },
        {
          $formkit: 'RplFormActions',
          label: 'Submit form',
          id: '123'
        }
      ]
    }}
  >
    {SingleTemplate.bind()}
  </Story>
</Canvas>

<Canvas>
  <Story name='With slots'>
    {SlotTemplate.bind()}
  </Story>
</Canvas>
