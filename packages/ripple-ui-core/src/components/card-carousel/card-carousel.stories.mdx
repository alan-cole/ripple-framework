import {
  Canvas,
  Meta,
  Story,
  ArgsTable
} from '@storybook/addon-docs'
import RplCardCarousel from './card-carousel.vue'
import RplPromoCard from '../card/promo-card.vue'
import { a11yStoryCheck } from './../../../stories/interactions.js'

export const exampleComponents = (args, index) => `
  <RplPromoCard
    url="#"
    title="${args.title}"
    :highlight="true"
  >
    <template #meta>
      <span class="rpl-card__topic">${args.topic} - ${index}</span>
    </template>
    <p>${args.content}</p>
  </RplPromoCard>
`
export const exampleData = [
  {
    title: 'Example title',
    topic: 'Environment',
    content: 'Labore mollit labore tempor quis ex fugiat eu proident aliqua ipsum duis, fugiat eu proident aliqua.'
  },
  {
    title: 'Another title',
    topic: 'Health',
    content: 'Elit adipisicing velit exercitation fugiat ex incididunt ullamco magna cupidatat dolore eiusmod sit amet.'
  },
  {
    title: 'A great title',
    topic: 'Community',
    content: 'Consequat deserunt fugiat eu proident velit exercitation fugiat ex aliqua ipsumnisi dolore id eata quest.'
  }
]

export const randomContent = () => exampleData[Math.floor(Math.random() * exampleData.length)]
export const exampleContent = (number) => Array.from({ length: number }).map((_, i) => exampleComponents(randomContent(), i + 1)).join('')

export const SingleTemplate = (args) => ({
  components: { RplCardCarousel, RplPromoCard },
  setup() {
    return { args }
  },
  template: `<RplCardCarousel v-bind="args">
    ${args.cards}
  </RplCardCarousel>`
})

<Meta
  title='WIP/Components/Card carousel'
  component={RplCardCarousel}
/>

# Card carousel

<ArgsTable of={RplCardCarousel} />

<Canvas>
  <Story
    name='Default'
    play={a11yStoryCheck}
    args={{
      perView: 1,
      cards: exampleContent(3)
    }}
  >
    {SingleTemplate.bind()}
  </Story>
</Canvas>

# Card carousel with Breakpoints

<ArgsTable of={RplCardCarousel} />

<Canvas>
  <Story
    name='Breakpoints'
    play={a11yStoryCheck}
    args={{
      perView: { xs: 1, m: 2, l: 3 },
      cards: exampleContent(6)
    }}
  >
    {SingleTemplate.bind()}
  </Story>
</Canvas>

# Card carousel with single card

<ArgsTable of={RplCardCarousel} />

<Canvas>
  <Story
    name='Single Card'
    play={a11yStoryCheck}
    args={{
      cards: exampleContent(1)
    }}
  >
    {SingleTemplate.bind()}
  </Story>
</Canvas>
